методы(это может сделать только создатель):
undoAllPurchasesSince(uint regionId) onlyOwner            - вернуть все деньги
addRegion(uint x1, uint y1, uint x2, uint y2) onlyOwner   - выставить область(пиксели) на продажу
removeRegion(uint regionId) onlyOwner                     - удалить регион с продажи

Первичная продажа
Методы:
purchase(uint regionId)                                   - покупка
calculatePrice(uint regionId) constant returns uint       - расчетать цену

Описание
Первичная продажа — это когда пользователь покупает выставленный создателем на
продажу лот, перечисляя на смарт-контракт деньги и указывая лот.
Стоимость зависит от текущей цены пикселя по формуле:
PC = (2^(x/(Sm/10))) / 1000
где
x — количество проданных пикселей

1 первый пиксель будет стоить 0,001 ETH

Прекупка (перепродажа)
Методы
purchase(uint regionId)
calculatePrice(uint regionId) constant returns uint

Описание
Любой лот может быть перекуплен любым пользователем в одностороннем порядке в
любой момент времени по цене S * (PT * 3). При передаче прав PT обновляется на PT
* 3.
Атомарный процесс:
- покупатель вызывает метод перекупки с переводом средств на метод
смарт-контракта
- смарт-контракт забирает себе 5% от (PT * 3) и переводит деньги владельцу лота
- лот передается новому владельцу с установкой новой цены за пиксель (PT =
PT*3)

Сетап
Методы
setup(uint regionId, image, string url)

Описание
Сразу после покупки у владельца лота есть сутки, чтобы сделать сетап (один раз). В
сетапе допустимо установить изображение и URL. PT остается неизменной.

Апдейты
Методы
updateRegion(
[uint regionId]
[, image]
[, string url]
[, address newOwner]
[, uint price] // new PT
)

Описание
После сетапа, или по прошествии суток после покупки, вместо сетапа есть апдейт. Он
меняет любые комбинации данных, но всегда меняет PT

, по следующему условию:

● if ($price) PT=max($price, PC)
● else PT=max(PL, PC)
Апдейт стоит 5% от PT

Мерж
У владельца лотов должна быть возможность объединить смежные лоты в один большой
лот. Мерж может быть из любого числа лотов (и 2, и 20...). Результирующий лот должен
быть прямоугольником. При мерже можно задать новую PT

, но она должна быть не ниже

расчетной.
Расчетная стоимость пикселя в результирующем лоте:
PT = max(PT1, PC) + ... + max(PTn, PC)
Расчетная стоимость лота для расчета 5%-й комиссии:
PT * (ST1 + ... + STn)
Возможный простой алгоритм валидации:​ есть множество areas которые хочется
смержить; проверяется, понятное дело, принадлежность (и существование) каждой,
считается сумма площадей (xEn-xBn+1)*(yEn-yBn+1) и считаются минимальные xm,ym и
максимальные xM,yM. (xM-xm+1)*(yM-ym+1) должен быть равен сумме площадей

Сплит
Так же должна быть возможность провести сплит лота. Сплит может делить лот на любое
количество лотов, главное чтобы они все были прямоугольными. Сплит должен быть
контролируемым через одобрение Создателя (чтобы полотно не превращалось черти во
что). При сплите можно задать свою стоимость пикселя для каждого, но она не должна
быть ниже расчетной.
Расчетная стоимость пикселя n-ого лота рассчитывается так:
PTn = max(PLn, PC)
Расчетная стоимость лотов для расчета 5%-й комиссии:
PT1 * (SL1/SL) + ... + PTn * (SLn/SL)

Цензура
Создатель смарт-контракта может отправить любой лот на цензуру сообществу.
Голосовать могут только владельцы лотов пропорционально площадям которые
находятся у них во владении.
На этапе цензуры содержимое лота (изображение) заменяется пустышкой.
Цензура длится сутки.
Если сообщество голосует “за” - содержимое лота возвращается назад.
Если “против” - ничего не меняется. А владельцу, чтобы проапдейтить, нужно будет
вызвать апдейт и не забыть заплатить за это 5% от стоимости :)
